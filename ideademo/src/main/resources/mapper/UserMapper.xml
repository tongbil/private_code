<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.google.demoForIdea.dao.UserDao" >
    <!--配置存储过程 可以根据存储过程返回值写他们一样的 不一定写死！！！？！！-->
    <resultMap type ="java.util.HashMap" id= "cursorMap">

        <result column ="cname" property="cname" />
        <result column ="cityid" property="cityid"  />
    </resultMap >


    <sql id="BASE_TABLE">
    user
  </sql>

    <sql id="BASE_COLUMN">
    id,username,password
  </sql>

    <insert id="insert" parameterType="com.google.demoForIdea.model.UserDomain">
        INSERT INTO
        <include refid="BASE_TABLE"/>
        <trim prefix="(" suffix=")" suffixOverrides=",">
            userName,password,
        </trim>
        <trim prefix="VALUES(" suffix=")" suffixOverrides=",">
            #{username, jdbcType=VARCHAR},#{password, jdbcType=VARCHAR},
        </trim>
    </insert>

    <select id="selectUsers" resultType="com.google.demoForIdea.model.UserDomain">
        SELECT
        <include refid="BASE_COLUMN"/>
        FROM
        <include refid="BASE_TABLE"/>
    </select>
    <select id="selUser"  parameterType="java.util.Map" statementType="CALLABLE">
        {call p_querynameandsalxxx(#{in_cityid,mode=IN,jdbcType=INTEGER},#{on_cityno,mode=OUT,jdbcType=INTEGER})}
    </select>

    <select id="getAllTeacherInfo" statementType="CALLABLE" parameterType="java.util.Map" >
       {call p_querynameandsal(#{result,mode=OUT,jdbcType=CURSOR,javaType=ResultSet,resultMap=cursorMap})}
    </select>

</mapper>